<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ“ˆ ëª¨ì˜ ì£¼ì‹ ì‹œë®¬ë ˆì´í„°</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #121212;
      color: #eee;
      transition: background 0.3s, color 0.3s;
    }
    body.light {
      background: #f7f9fb;
      color: #222;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .panel {
      background: #222;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.8);
      transition: background 0.3s, box-shadow 0.3s;
    }
    body.light .panel {
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    #stockChart {
      width: 100%;
      height: 300px;
      background: transparent;
    }
    textarea {
      width: 100%;
      height: 100px;
      background: #222;
      color: #eee;
      border: none;
      border-radius: 8px;
      padding: 10px;
      resize: none;
      transition: background 0.3s, color 0.3s;
    }
    body.light textarea {
      background: #f9f9f9;
      color: #222;
    }
    button {
      cursor: pointer;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      margin-right: 8px;
      background: #444;
      color: #eee;
      font-weight: bold;
      transition: background 0.3s;
    }
    button:hover {
      background: #666;
    }
    body.light button {
      background: #ddd;
      color: #222;
    }
    body.light button:hover {
      background: #bbb;
    }
    #newsAlert {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      background: #fffae6;
      color: #333;
      padding: 10px 20px;
      border-radius: 0 0 12px 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
      font-weight: bold;
      display: none;
      z-index: 9999;
      max-width: 80%;
      text-align: center;
      user-select: none;
    }
    #toggleThemeBtn {
      background: #007bff;
      color: white;
      margin-bottom: 20px;
    }
    #toggleThemeBtn:hover {
      background: #0056b3;
    }
    .status-row {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
    }
    .status-row > div {
      flex: 1 1 30%;
      min-width: 150px;
    }
    #stockInfo > div {
      margin-bottom: 8px;
      padding: 8px;
      background: #333;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    body.light #stockInfo > div {
      background: #f0f0f0;
      color: #222;
    }
    #stockInfo b {
      flex: 1 1 120px;
    }
    #stockInfo span {
      min-width: 90px;
      text-align: right;
    }
  </style>
</head>
<body>
  <button id="toggleThemeBtn">ğŸŒ™ ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ í† ê¸€</button>
  <h1>ğŸ“ˆ ëª¨ì˜ ì£¼ì‹ ì‹œë®¬ë ˆì´í„°</h1>

  <div id="newsAlert"></div>

  <div class="panel status-row">
    <div>ğŸ’° ìì‚°: <span id="cash"></span>ì›</div>
    <div>ì´ í‰ê°€ê¸ˆì•¡: <span id="totalValue"></span>ì›</div>
    <div>ìˆ˜ìµë¥ : <span id="roi"></span>%</div>
  </div>

  <div class="panel">
    <label for="stockSelect">ì¢…ëª© ì„ íƒ:</label>
    <select id="stockSelect"></select>
    <input type="number" id="amount" value="1" min="1" style="width:70px; margin-left:10px;">
    <button onclick="buyStock()">ë§¤ìˆ˜</button>
    <button onclick="sellStock()">ë§¤ë„</button>
    <button onclick="shortStock()">ìˆ ë§¤ìˆ˜</button>
    <button onclick="shortSellStock()">ìˆ ë§¤ë„</button>
  </div>

  <div class="panel" id="stockInfo"></div>

  <div class="panel">
    <canvas id="stockChart"></canvas>
  </div>

  <div class="panel">
    <h3>ğŸ“˜ ê±°ë˜ ë¡œê·¸</h3>
    <textarea id="logArea" readonly></textarea>
  </div>

  <div class="panel">
    <button onclick="resetAllData()" style="background: red; color: white;">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
  </div>

  <script>
    const initialPrices = {
      'ì‚¼ì„±ì „ì': 70000,
      'í˜„ëŒ€ì°¨': 180000,
      'LGì—ë„ˆì§€ì†”ë£¨ì…˜': 400000,
      'ì¹´ì¹´ì˜¤': 60000,
      'ë„¤ì´ë²„': 200000,
      'SKí•˜ì´ë‹‰ìŠ¤': 130000,
      'ì‚¼ì„±SDI': 600000,
      'POSCO': 350000,
      'í•œí™”ì†”ë£¨ì…˜': 50000,
      'ì…€íŠ¸ë¦¬ì˜¨': 160000,
      'ì”¨ì  ': 30000,
      'ë‘ì‚°ì—ë„ˆë¹Œë¦¬í‹°': 25000,
      'HMM': 15000,
      'íŒ¬ì˜¤ì…˜': 10000,
      'í•œêµ­ì „ë ¥': 1000
    };

    const newsList = [
      { stock: 'ì‚¼ì„±ì „ì', text: 'ì‚¼ì„±ì „ì, ì‹ ì œí’ˆ ëŒ€ë°• ê¸°ëŒ€ê°' },
      { stock: 'í˜„ëŒ€ì°¨', text: 'í˜„ëŒ€ì°¨, ì‹ ì°¨ ë°œí‘œ ì„ë°•' },
      { stock: 'LGì—ë„ˆì§€ì†”ë£¨ì…˜', text: 'LGì—ë„ˆì§€ì†”ë£¨ì…˜, ë°°í„°ë¦¬ ê³µê¸‰ ê³„ì•½ ì²´ê²°' },
      { stock: 'ì¹´ì¹´ì˜¤', text: 'ì¹´ì¹´ì˜¤, ì‹ ê·œ ì„œë¹„ìŠ¤ ì¶œì‹œ' },
      { stock: 'ë„¤ì´ë²„', text: 'ë„¤ì´ë²„, AI ê¸°ìˆ  íˆ¬ì í™•ëŒ€' },
      { stock: 'SKí•˜ì´ë‹‰ìŠ¤', text: 'SKí•˜ì´ë‹‰ìŠ¤, ë°˜ë„ì²´ ê°€ê²© ìƒìŠ¹' },
      { stock: 'ì‚¼ì„±SDI', text: 'ì‚¼ì„±SDI, ì „ê¸°ì°¨ ë°°í„°ë¦¬ ìˆ˜ì£¼ ì¦ê°€' },
      { stock: 'POSCO', text: 'POSCO, ì² ê°• ìˆ˜ì¶œ í˜¸ì¡°' },
      { stock: 'í•œí™”ì†”ë£¨ì…˜', text: 'í•œí™”ì†”ë£¨ì…˜, íƒœì–‘ê´‘ í”„ë¡œì íŠ¸ ìˆ˜ì£¼' },
      { stock: 'ì…€íŠ¸ë¦¬ì˜¨', text: 'ì…€íŠ¸ë¦¬ì˜¨, ì‹ ì•½ ì„ìƒ ì„±ê³µ' },
      { stock: 'ì”¨ì  ', text: 'ì”¨ì  , ì§„ë‹¨í‚¤íŠ¸ ìˆ˜ì¶œ í™•ëŒ€' },
      { stock: 'ë‘ì‚°ì—ë„ˆë¹Œë¦¬í‹°', text: 'ë‘ì‚°ì—ë„ˆë¹Œë¦¬í‹°, ì¹œí™˜ê²½ ì—ë„ˆì§€ íˆ¬ì' },
      { stock: 'HMM', text: 'HMM, ë¬¼ë™ëŸ‰ ì¦ê°€ ê¸°ëŒ€' },
      { stock: 'íŒ¬ì˜¤ì…˜', text: 'íŒ¬ì˜¤ì…˜, í•´ìš´ ìš´ì„ ìƒìŠ¹' },
      { stock: 'í•œêµ­ì „ë ¥', text: 'í•œêµ­ì „ë ¥, ì „ê¸°ìš”ê¸ˆ ë™ê²° ë°œí‘œ' },
      // ë” ì¶”ê°€ ê°€ëŠ¥ (100ê°œ ì±„ìš°ê¸° ìœ„í•´ ë°˜ë³µ ì˜ˆì‹œ)
      // ì‹¤ì œë¡œëŠ” ë‹¤ì–‘í•œ ë‰´ìŠ¤ë¥¼ ë‹¤ì±„ë¡­ê²Œ ë°°ì—´í•´ ì£¼ì„¸ìš”.
    ];

    // 100ê°œ ì±„ìš°ê¸° ìœ„í•´ ë³µì‚¬ ë°˜ë³µ (ì˜ˆì‹œìš©)
    while(newsList.length < 100) {
      newsList.push(...newsList.slice(0, 15).map(n => ({ stock: n.stock, text: n.text })));
    }
    newsList.length = 100; // ì •í™•íˆ 100ê°œë¡œ ì œí•œ

    let prices = JSON.parse(localStorage.getItem('stockPrices')) || structuredClone(initialPrices);
    let stocks = Object.entries(prices).map(([name, price]) => ({ name, price }));

    let portfolio = JSON.parse(localStorage.getItem('portfolio')) || {};
    let cash = parseInt(localStorage.getItem('cash') || "100000");
    let logs = JSON.parse(localStorage.getItem('logs')) || [];
    let currentStock = stocks[0].name;
    let chartsData = {};
    let currentChart = null;

    // ìˆ˜ìˆ˜ë£Œ 5%
    const feeRate = 0.05;

    function saveAll() {
      localStorage.setItem('portfolio', JSON.stringify(portfolio));
      localStorage.setItem('cash', cash);
      localStorage.setItem('logs', JSON.stringify(logs));
      const updatedPrices = {};
      stocks.forEach(s => updatedPrices[s.name] = s.price);
      localStorage.setItem('stockPrices', JSON.stringify(updatedPrices));
    }

    function updateUI() {
      document.getElementById('cash').textContent = cash.toLocaleString();
      let totalVal = cash;
      for (const s of stocks) {
        const hold = portfolio[s.name]?.long || 0;
        const shortHold = portfolio[s.name]?.short || 0;
        totalVal += s.price * hold;
        // ìˆ í¬ì§€ì…˜ í‰ê°€ (ì£¼ê°€ê°€ ë–¨ì–´ì§€ë©´ ì´ìµ)
        if(shortHold) {
          // í‰ê°€ì†ìµì€ ë§¤ìˆ˜ì‹œ ì£¼ê°€ - í˜„ì¬ ì£¼ê°€
          const avgShortPrice = portfolio[s.name].shortAvgPrice || s.price;
          totalVal += (avgShortPrice - s.price) * shortHold;
        }
      }
      document.getElementById('totalValue').textContent = totalVal.toLocaleString();
      let roiVal = ((totalVal - 100000) / 100000 * 100).toFixed(2);
      document.getElementById('roi').textContent = roiVal;

      // í¬íŠ¸í´ë¦¬ì˜¤ ì •ë³´ ì—…ë°ì´íŠ¸
      const infoDiv = document.getElementById('stockInfo');
      infoDiv.innerHTML = '';
      for (const s of stocks) {
        const longAmt = portfolio[s.name]?.long || 0;
        const shortAmt = portfolio[s.name]?.short || 0;
        const item = document.createElement('div');
        item.innerHTML = `<b>${s.name}</b> í˜„ì¬ê°€: ${s.price.toLocaleString()}ì› 
          <span>ë¡± ë³´ìœ : ${longAmt}</span> <span>ìˆ ë³´ìœ : ${shortAmt}</span>`;
        infoDiv.appendChild(item);
      }
    }

    function logAction(text) {
      const time = new Date().toLocaleTimeString();
      logs.push(`[${time}] ${text}`);
      if(logs.length > 100) logs.shift();
      const logArea = document.getElementById('logArea');
      logArea.value = logs.join('\n');
      logArea.scrollTop = logArea.scrollHeight;
      saveAll();
    }

    function buyStock() {
      const amt = parseInt(document.getElementById('amount').value);
      if(amt <= 0 || isNaN(amt)) return alert("ì˜¬ë°”ë¥¸ ë§¤ìˆ˜ ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”.");
      const stock = stocks.find(s => s.name === currentStock);
      if(!stock) return;
      const totalCost = Math.floor(stock.price * amt * (1 + feeRate));
      if(cash < totalCost) return alert("ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      cash -= totalCost;
      if(!portfolio[currentStock]) portfolio[currentStock] = {long:0, short:0, shortAvgPrice: 0};
      portfolio[currentStock].long += amt;
      logAction(`ë§¤ìˆ˜: ${currentStock} ${amt}ì£¼, ë¹„ìš© ${totalCost.toLocaleString()}ì› (ìˆ˜ìˆ˜ë£Œ í¬í•¨)`);
      updateUI();
      saveAll();
      updateChartData(currentStock, stock.price);
    }

    function sellStock() {
      const amt = parseInt(document.getElementById('amount').value);
      if(amt <= 0 || isNaN(amt)) return alert("ì˜¬ë°”ë¥¸ ë§¤ë„ ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”.");
      if(!portfolio[currentStock] || portfolio[currentStock].long < amt) return alert("ë³´ìœ  ì£¼ì‹ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      const stock = stocks.find(s => s.name === currentStock);
      if(!stock) return;
      const totalGain = Math.floor(stock.price * amt * (1 - feeRate));
      portfolio[currentStock].long -= amt;
      cash += totalGain;
      logAction(`ë§¤ë„: ${currentStock} ${amt}ì£¼, ìˆ˜ìµ ${totalGain.toLocaleString()}ì› (ìˆ˜ìˆ˜ë£Œ í¬í•¨)`);
      updateUI();
      saveAll();
      updateChartData(currentStock, stock.price);
    }

    // ìˆ ë§¤ìˆ˜ - ìì‚° ì†Œëª¨, ì£¼ê°€ í•˜ë½ ì‹œ ì´ìµ
    function shortStock() {
      const amt = parseInt(document.getElementById('amount').value);
      if(amt <= 0 || isNaN(amt)) return alert("ì˜¬ë°”ë¥¸ ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”.");
      const stock = stocks.find(s => s.name === currentStock);
      if(!stock) return;
      const totalCost = Math.floor(stock.price * amt * (1 + feeRate));
      if(cash < totalCost) return alert("ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      cash -= totalCost;
      if(!portfolio[currentStock]) portfolio[currentStock] = {long:0, short:0, shortAvgPrice: 0};
      // ìˆ ë§¤ìˆ˜ëŠ” ì£¼ê°€ í•˜ë½ ì‹œ ì´ìµ, í‰ê·  ìˆ ê°€ê²© ê³„ì‚°
      const prevShort = portfolio[currentStock].short || 0;
      const prevAvg = portfolio[currentStock].shortAvgPrice || 0;
      const newAvg = prevShort === 0 ? stock.price : ((prevAvg * prevShort) + (stock.price * amt)) / (prevShort + amt);
      portfolio[currentStock].short = prevShort + amt;
      portfolio[currentStock].shortAvgPrice = newAvg;
      logAction(`ìˆ ë§¤ìˆ˜: ${currentStock} ${amt}ì£¼, ë¹„ìš© ${totalCost.toLocaleString()}ì› (ìˆ˜ìˆ˜ë£Œ í¬í•¨)`);
      updateUI();
      saveAll();
      updateChartData(currentStock, stock.price);
    }

    // ìˆ ë§¤ë„ - í¬ì§€ì…˜ ì •ë¦¬, ìˆ˜ìµ ì‹¤í˜„
    function shortSellStock() {
      const amt = parseInt(document.getElementById('amount').value);
      if(amt <= 0 || isNaN(amt)) return alert("ì˜¬ë°”ë¥¸ ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”.");
      if(!portfolio[currentStock] || portfolio[currentStock].short < amt) return alert("ë³´ìœ  ìˆ í¬ì§€ì…˜ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      const stock = stocks.find(s => s.name === currentStock);
      if(!stock) return;
      // ìˆ ë§¤ë„ ì‹œ ê°€ê²© ì°¨ìµ ì‹¤í˜„: (í‰ê·  ìˆ ë§¤ìˆ˜ ê°€ê²© - í˜„ì¬ ê°€ê²©) * amt - ìˆ˜ìˆ˜ë£Œ
      const avgShortPrice = portfolio[currentStock].shortAvgPrice;
      let profit = (avgShortPrice - stock.price) * amt;
      profit = Math.floor(profit * (1 - feeRate)); // ìˆ˜ìˆ˜ë£Œ ì°¨ê°
      portfolio[currentStock].short -= amt;
      if(portfolio[currentStock].short === 0) portfolio[currentStock].shortAvgPrice = 0;
      cash += (profit + Math.floor(stock.price * amt * (1 - feeRate))); 
      // ì‹¤ì œ í˜„ê¸ˆ ìœ ì…: ìˆ ë§¤ìˆ˜ ë¹„ìš© + ì´ìµ ì‹¤í˜„
      logAction(`ìˆ ë§¤ë„: ${currentStock} ${amt}ì£¼, ìˆ˜ìµ ${profit.toLocaleString()}ì› (ìˆ˜ìˆ˜ë£Œ í¬í•¨)`);
      updateUI();
      saveAll();
      updateChartData(currentStock, stock.price);
    }

    // ì°¨íŠ¸ ì´ˆê¸°í™” ë° ë°ì´í„° ê´€ë¦¬
    const ctx = document.getElementById('stockChart').getContext('2d');
    function createChart(stockName) {
      if(currentChart) currentChart.destroy();
      const data = {
        labels: [],
        datasets: [{
          label: stockName,
          data: [],
          borderColor: 'lime',
          backgroundColor: 'transparent',
          tension: 0.3,
          pointRadius: 0,
          borderWidth: 2,
        }]
      };
      currentChart = new Chart(ctx, {
        type: 'line',
        data,
        options: {
          animation: false,
          scales: {
            x: { display: false },
            y: { beginAtZero: false }
          },
          plugins: {
            legend: { labels: { color: document.body.classList.contains('light') ? '#222' : '#eee' } }
          }
        }
      });
      chartsData[stockName] = [];
    }
    function updateChartData(stockName, price) {
      if(!chartsData[stockName]) chartsData[stockName] = [];
      let arr = chartsData[stockName];
      arr.push(price);
      if(arr.length > 50) arr.shift();
      if(currentStock === stockName && currentChart) {
        currentChart.data.labels = arr.map((_, i) => '');
        currentChart.data.datasets[0].data = arr;
        currentChart.update();
      }
    }

    // í­ë½, í­ë“± ë° ë‰´ìŠ¤ ì´ë²¤íŠ¸ ê´€ë ¨
    function applyRandomCrashOrRise() {
      const targetIndex = Math.floor(Math.random() * stocks.length);
      const target = stocks[targetIndex];
      const crashOrRise = Math.random() < 0.5 ? 'crash' : 'rise';
      if(crashOrRise === 'crash') {
        const rate = Math.random() * 0.3 + 0.7; // 70% ~ 100% í­ë½
        target.price = Math.max(1, Math.floor(target.price * (1 - rate)));
        logAction(`ğŸ’¥ í­ë½: ${target.name} -${Math.floor(rate*100)}%`);
      } else {
        const rate = Math.random() * 0.2 + 1.0; // 100% ~ 120% í­ë“±
        target.price = Math.floor(target.price * rate);
        logAction(`ğŸš€ í­ë“±: ${target.name} +${Math.floor((rate-1)*100)}%`);
      }
      updateChartData(target.name, target.price);
      saveAll();
      updateUI();
    }

    // ë‰´ìŠ¤ ì•Œë¦¼ ê´€ë ¨
    function showNewsAlert(msg) {
      const alertDiv = document.getElementById('newsAlert');
      alertDiv.textContent = `ğŸ“° ë‰´ìŠ¤: ${msg}`;
      alertDiv.style.display = 'block';
      setTimeout(() => {
        alertDiv.style.display = 'none';
      }, 5000);
    }

    function applyNewsEvent() {
      const news = newsList[Math.floor(Math.random() * newsList.length)];
      const stock = stocks.find(s => s.name === news.stock);
      if(!stock) return;

      const isRise = Math.random() < 0.5;
      const rate = Math.random() * 0.3 + 0.7; // 70% ~ 100% ë³€í™”ìœ¨

      if(isRise) {
        stock.price = Math.floor(stock.price * (1 + rate));
        logAction(`ğŸ“° ë‰´ìŠ¤ ìƒìŠ¹: ${news.text} (${stock.name} +${Math.floor(rate*100)}%)`);
        showNewsAlert(`${news.text} (${stock.name} +${Math.floor(rate*100)}%)`);
      } else {
        stock.price = Math.max(1, Math.floor(stock.price * (1 - rate)));
        logAction(`ğŸ“° ë‰´ìŠ¤ í•˜ë½: ${news.text} (${stock.name} -${Math.floor(rate*100)}%)`);
        showNewsAlert(`${news.text} (${stock.name} -${Math.floor(rate*100)}%)`);
      }
      updateChartData(stock.name, stock.price);
      saveAll();
      updateUI();
    }

    // UI ì´ë²¤íŠ¸ ë° ì´ˆê¸°í™”
    const stockSelect = document.getElementById('stockSelect');
    stockSelect.addEventListener('change', () => {
      currentStock = stockSelect.value;
      createChart(currentStock);
      if(chartsData[currentStock] && chartsData[currentStock].length) {
        currentChart.data.labels = chartsData[currentStock].map(() => '');
        currentChart.data.datasets[0].data = chartsData[currentStock];
        currentChart.update();
      }
      updateUI();
    });

    function populateStockSelect() {
      stockSelect.innerHTML = '';
      stocks.forEach(s => {
        const opt = document.createElement('option');
        opt.value = s.name;
        opt.textContent = s.name;
        stockSelect.appendChild(opt);
      });
      stockSelect.value = currentStock;
    }

    function resetAllData() {
      if(!confirm("ì •ë§ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì €ì¥ëœ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.")) return;
      localStorage.clear();
      location.reload();
    }

    // ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ í† ê¸€
    const toggleThemeBtn = document.getElementById('toggleThemeBtn');
    toggleThemeBtn.addEventListener('click', () => {
      document.body.classList.toggle('light');
      if(currentChart) {
        currentChart.options.plugins.legend.labels.color = document.body.classList.contains('light') ? '#222' : '#eee';
        currentChart.update();
      }
    });

    // ì£¼ê¸°ì  ì´ë²¤íŠ¸ ì„¤ì •
    setInterval(() => {
      // ë§¤ 90ì´ˆë§ˆë‹¤ ë‰´ìŠ¤ ì´ë²¤íŠ¸
      applyNewsEvent();
    }, 60000); // 60ì´ˆ

    setInterval(() => {
      // ë§¤ 100ì´ˆë§ˆë‹¤ í­ë“±/í­ë½ í•œ ì¢…ëª©
      applyRandomCrashOrRise();
    }, 100000);

    // ë§¤ 3ì´ˆë§ˆë‹¤ í˜„ì¬ ì°¨íŠ¸ ê°±ì‹  (ì£¼ê°€ ì•½ê°„ ë³€ë™ í¬í•¨)
    setInterval(() => {
      stocks.forEach(s => {
        // ì•½ê°„ ì†Œí­ ë³€ë™ (Â±1%)
        const changePercent = (Math.random() * 2 - 1) * 0.01;
        s.price = Math.max(1, Math.floor(s.price * (1 + changePercent)));
        updateChartData(s.name, s.price);
      });
      if(currentChart) {
        currentChart.data.datasets[0].data = chartsData[currentStock];
        currentChart.update();
      }
      updateUI();
      saveAll();
    }, 3000);

    // ì´ˆê¸°í™” í•¨ìˆ˜ ì‹¤í–‰
    init();
  </script>
</body>
</html>
